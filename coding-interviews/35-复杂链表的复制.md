# [复杂链表的复制](https://www.nowcoder.com/practice/f836b2c43afc4b35ad6adc41ec941dba?tpId=13&tqId=11178&tPage=2&rp=2&ru=/ta/coding-interviews&qru=/ta/coding-interviews/question-ranking)

```c++
class Solution {
public:
    RandomListNode* Clone(RandomListNode* pHead){
        if(!pHead)
            return nullptr;
        //复制节点
        RandomListNode* cur = pHead;
        while(cur){
            RandomListNode* temp = new RandomListNode(cur->label);
            temp->next = cur->next;
            cur->next = temp;
            cur = temp->next;
        }
        //复制random指针
        cur = pHead;
        while(cur){
            if(cur->random)
                cur->next->random = cur->random->next;
            cur = cur->next->next;
        }
        //拆分
        cur = pHead;
        RandomListNode* tmp = pHead->next;
        RandomListNode* res = pHead->next;
        while(cur){
            cur->next = cur->next->next;
            if(tmp->next)
                tmp->next = tmp->next->next;
            cur = cur->next;
            tmp = tmp->next;
        }
        return res;
    }
};
```

