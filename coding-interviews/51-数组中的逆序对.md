# [[数组中的逆序对](https://leetcode-cn.com/problems/shu-zu-zhong-de-ni-xu-dui-lcof/)

类似于归并排序

```java
import java.util.Arrays;

class Solution {
    public int reversePairs(int[] nums) {
        int len = nums.length;
        if (len < 2) return 0;
        int[] copy = new int[len];
        System.arraycopy(nums, 0, copy, 0, len);
        int res = merge(nums, copy, 0, len - 1);
        return res;
    }

     private int merge(int[] nums, int[] copy, int left, int right) {
        if (left == right) {
            copy[left] = nums[left];
            return 0;
        }
        int len = (right - left) >>> 1;
        int leftCount = merge(copy, nums, left, left + len);
        int rightCount = merge(copy, nums, left + len + 1, right);

        int i = left + len;
        int j = right;
        int indexCopy = right;
        int count = 0;

        while (i >= left && j >= left + len + 1) {
            if(nums[i] > nums[j]){
                copy[indexCopy--] = nums[i--];
                count = count + j - left - len;
            }else{
                copy[indexCopy--] = nums[j--];
            }
        }

        for( ; i >= left; i--){
            copy[indexCopy--] = nums[i];
        }
        for( ; j >= left + len + 1; j--){
            copy[indexCopy--] = nums[j];
        }
        return leftCount + rightCount + count;
     }
}
```

